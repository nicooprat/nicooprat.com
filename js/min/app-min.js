function Curve(e){this.points=e}function getScript(e,t){var o=document.createElement("script"),n=document.getElementsByTagName("script")[0];o.async=1,n.parentNode.insertBefore(o,n),o.onload=o.onreadystatechange=function(e,n){(n||!o.readyState||/loaded|complete/.test(o.readyState))&&(o.onload=o.onreadystatechange=null,o=void 0,n||t&&t())},o.src=e}var delay=0;setInterval(function(){delay=0},100);var books=document.querySelectorAll(".books-item");Array.prototype.slice.call(books).forEach(function(e){var t=new Waypoint({element:e,handler:function(e){"down"==e?this.element.className.indexOf("is-inview")<=0&&(this.element.className=this.element.className.trim()+" is-inview",this.element.style["transition-delay"]=delay+"ms",this.element.style["-webkit-transition-delay"]=delay+"ms",delay+=100):(this.element.className=this.element.className.replace(/is-inview/,""),this.element.style="")},offset:"90%"})});var timeout;if("ontouchstart"in window||navigator.maxTouchPoints);else{var clone=document.querySelector(".wrapper").appendChild(document.querySelector(".intro").cloneNode(!0));clone.className+=" clone",window.addEventListener("scroll",function(e){var t=document.body.scrollTop||document.documentElement.scrollTop;t>=clone.offsetTop&&(document.body.scrollTop=document.documentElement.scrollTop=0,document.body.className.indexOf("trollface")<=0&&(document.body.className+=" trollface",clearTimeout(timeout),timeout=setTimeout(function(){document.body.className=document.body.className.replace("trollface","")},500)))})}Curve.prototype.draw=function(e,t,o){var n=e.canvas.width,i=e.canvas.height;e.save(),e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y),e.quadraticCurveTo(this.points[1].x,this.points[1].y-o,this.points[2].x,this.points[2].y),e.lineTo(n,this.points[2].y),e.lineTo(n,i),e.lineTo(0,i),e.lineTo(0,this.points[0].y),e.closePath(),e.fillStyle=t,e.fill(),e.restore()},Array.prototype.slice.call(document.querySelectorAll(".wave")).forEach(function(e){function t(e,t){[e.points[0],e.points[2]].forEach(function(e){e.y=l/2+t}),e.draw(i,o,t)}for(var o=e.getAttribute("bottom"),n=e.getAttribute("top"),i=e.getContext("2d"),a=e.width,l=e.height,c=[],s,r=0,d=0,m=0,u=document.body.scrollTop||document.documentElement.scrollTop,h=u,y=.7,p=0;a>=p;p+=a/2)c.push({x:p,y:l/2});s=new Curve(c),window.addEventListener("scroll",function(){u=document.body.scrollTop||document.documentElement.scrollTop},!1),window.addEventListener("resize",function(){a=e.width,l=e.height},!1),function f(){window.requestAnimationFrame(f),r=u-h,h=u,Math.abs(r)>1&&(d+=r),d=Math.min(l/2,d),d=Math.max(-l/2,d),d=Math.floor(d),m=d,d*=y,d!=m&&("transparent"==n?i.clearRect(0,0,a,l):(i.fillStyle=n,i.fillRect(0,0,a,l)),t(s,d))}()}),("ontouchstart"in window||navigator.maxTouchPoints)&&getScript("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js",function(){FastClick.attach(document.body)});